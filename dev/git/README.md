# Git

git是一种源码管理系统（source code management，缩写为SCM）。它对当前文件提供版本管理功能，核心思想是对当前文件建立一个对象数据库（object database），将历史版本信息存放在这个数据库中。

对象数据库包含四类对象。

- Blob：包含二进制数据，它们是文件内容。只要文件内容改变，就会在对象数据库中生成一个blob对象。注意，blob对象只保存文件内容，不含文件名和文件存储位置等信息。如果文件名改变，或者文件储存位置改变，不会生成新的blob对象。
- Tree：blob对象的集合，以及它们的文件名和权限。一个tree对象描述一个时点上的一个目录。
- Commit：描述一个时点上的项目状态，包含一条log信息，一个tree对象和指向父节点（parent commits）的指针。第一个commit对象没有父节点。

对象数据库依赖SHA哈希函数。当一个对象加入数据库，它会被SHA函数处理，得到的结果就是该对象在数据库中的名字（前两个字节被当作目录名，用来提高效率）。

git命令基本上是图数据库操作命令，用来删除/操作节点、移动指针等等。

Index区域（.dircache/index）是一个二进制文件，用来保存当前目录在某个时点的状态。

`git init`命令用来创建index区域，以及对象数据库（.dircache/objects）。

## 参考链接

- corbet, [The guts of git](https://lwn.net/Articles/131657/): 最早的一篇介绍Git的文章，可以了解Git的总体设计思路
